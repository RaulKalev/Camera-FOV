<Window
    x:Class="Camera_FOV.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Camera_FOV"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Title="Camera FOV"
    Width="285"
    SizeToContent="Height"
    MinWidth="285"
    MinHeight="300"
    AllowsTransparency="True"
    Background="Transparent"
    WindowStyle="None">

    <Window.Resources>
        <!--  Merged Resource Dictionaries  -->
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>

                <!--  Material Design default theme  -->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ComboBox.xaml" />
                <!--  Material Design dark theme  -->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Dark.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <!--  Custom Checkbox Style  -->
            <Style x:Key="CustomCheckboxStyle" TargetType="CheckBox">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="CheckBox">
                            <Border
                                x:Name="CheckboxBorder"
                                Padding="5"
                                Background="Transparent"
                                Cursor="Hand">
                                <StackPanel
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal">
                                    <!--  Checkbox Icon  -->
                                    <materialDesign:PackIcon
                                        x:Name="CheckboxIcon"
                                        Width="15"
                                        Height="15"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        Kind="CheckboxBlankOutline" />

                                    <!--  Checkbox Text  -->
                                    <TextBlock
                                        Margin="8,0,0,0"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        Text="{TemplateBinding Content}" />
                                </StackPanel>
                            </Border>

                            <ControlTemplate.Triggers>
                                <!--  Checked State  -->
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="CheckboxIcon" Property="Kind" Value="CheckboxMarkedOutline" />
                                    <Setter TargetName="CheckboxIcon" Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                                </Trigger>
                                <!--  Hover State  -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="CheckboxBorder" Property="Background" Value="{DynamicResource SelectionHoverBrush}" />
                                </Trigger>
                                <!--  Pressed State  -->
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="CheckboxBorder" Property="Background" Value="{DynamicResource SelectionPressedBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <!--  Global DarkThemeComboBox  -->
            <Style
                x:Key="DarkThemeComboBox"
                BasedOn="{StaticResource MaterialDesignComboBox}"
                TargetType="ComboBox">
                <Setter Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                <Setter Property="materialDesign:HintAssist.Foreground" Value="{DynamicResource ForegroundBrush}" />
                <Setter Property="Padding" Value="2,0,2,0" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="HorizontalContentAlignment" Value="Left" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="ItemContainerStyle">
                    <Setter.Value>
                        <Style TargetType="ComboBoxItem">
                            <Setter Property="Padding" Value="0,2,0,2" />
                            <Setter Property="Margin" Value="0,1,0,1" />
                            <Setter Property="HorizontalContentAlignment" Value="Left" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                            <Setter Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                            <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ComboBox">
                            <Grid>
                                <!--  ComboBox Content  -->
                                <ToggleButton
                                    Name="ToggleButton"
                                    HorizontalContentAlignment="Left"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    FocusVisualStyle="{x:Null}"
                                    Foreground="{TemplateBinding Foreground}"
                                    IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">

                                    <ContentPresenter
                                        Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="Center"
                                        Content="{TemplateBinding SelectionBoxItem}"
                                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" />
                                </ToggleButton>

                                <!--  Dropdown Popup  -->
                                <Popup
                                    Name="Popup"
                                    AllowsTransparency="True"
                                    Focusable="False"
                                    IsOpen="{TemplateBinding IsDropDownOpen}"
                                    Placement="Bottom">
                                    <Border
                                        Name="PopupBorder"
                                        Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}"
                                        Background="{DynamicResource SecondaryBackgroundBrush}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="0">
                                        <ScrollViewer Margin="4,6,4,6">
                                            <StackPanel IsItemsHost="True" />
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <!--  Trigger for IsEnabled  -->
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Foreground" Value="Gray" />
                                </Trigger>
                                <!--  Hover Effect Trigger  -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ToggleButton" Property="Background" Value="{DynamicResource HighlightBrush}" />
                                    <Setter TargetName="ToggleButton" Property="BorderBrush" Value="{DynamicResource HighlightBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>



            <Style
                x:Key="CustomTextBoxStyle"
                BasedOn="{StaticResource {x:Type TextBox}}"
                TargetType="TextBox">
                <Setter Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Border
                                x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <ScrollViewer x:Name="PART_ContentHost" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--  Change border color on mouse over  -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource SelectionHoverBrush}" />
                                </Trigger>
                                <!--  Change border color on focus  -->
                                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource TextHighlightBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Background="Transparent" ClipToBounds="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="28*" />

        </Grid.ColumnDefinitions>
        <!--  Outer Border with Opacity and Blur  -->
        <Border
            Grid.ColumnSpan="2"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="2"
            ClipToBounds="True"
            CornerRadius="10"
            Opacity="0.7"
            SnapsToDevicePixels="True">
            <Border.Effect>
                <BlurEffect KernelType="Gaussian" Radius="2" />
            </Border.Effect>
        </Border>

        <!--  Content Container (Not Affected by Opacity/Blur)  -->
        <Border
            Grid.ColumnSpan="2"
            Margin="2,2,2,2"
            Background="{DynamicResource PrimaryBackgroundBrush}"
            CornerRadius="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Custom Title Bar  -->
                <local:TitleBar
                    Grid.Row="0"
                    Margin="0,0,0,1"
                    Foreground="{DynamicResource ForegroundBrush}" />
                <Grid
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="0,0,100,0"
                    HorizontalAlignment="Right">
                    <ToggleButton
                        x:Name="ThemeToggleButton"
                        Width="28"
                        Height="15.5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Click="ToggleTheme_Click"
                        DockPanel.Dock="Right"
                        IsChecked="True"
                        ToolTip="Toggle Theme">

                        <ToggleButton.Template>
                            <ControlTemplate TargetType="ToggleButton">
                                <Grid Background="Transparent">
                                    <!--  Dynamic Icon Based on Toggle State  -->
                                    <materialDesign:PackIcon
                                        x:Name="ThemeToggleIcon"
                                        Width="30"
                                        Height="30"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource IconBrush}"
                                        Kind="ToggleSwitchOffOutline" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter TargetName="ThemeToggleIcon" Property="Kind" Value="ToggleSwitchOffOutline" />
                                    </Trigger>
                                    <Trigger Property="IsChecked" Value="False">
                                        <Setter TargetName="ThemeToggleIcon" Property="Kind" Value="ToggleSwitchOutline" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>
                <Grid
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="10,10,10,10"
                    HorizontalAlignment="Stretch">
                    <Border
                        BorderBrush="Gray"
                        BorderThickness="0"
                        ClipToBounds="True" />
                    <!--  Camera Resolution Dropdown  -->
                    <StackPanel>
                        <!--  Button with Custom Style  -->
                        <Button
                            x:Name="SelectElementsButton"
                            Width="150"
                            Height="30"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Background="{DynamicResource SecondaryBackgroundBrush}"
                            BorderBrush="{DynamicResource BorderBrush}"
                            Click="SelectElementsButton_Click"
                            Content="Vali kaamera"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="{DynamicResource ForegroundBrush}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="BorderThickness" Value="1" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border
                                                    x:Name="ButtonBorder"
                                                    Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="5">
                                                    <ContentPresenter
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Content="{TemplateBinding Content}" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <!--  Hover Effect  -->
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                        <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                    </Trigger>
                                                    <!--  Pressed Effect  -->
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                        <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>


                        <materialDesign:Card
                            Margin="0,5,0,0"
                            Padding="10"
                            Background="Transparent"
                            BorderBrush="Gray"
                            BorderThickness="1">

                            <StackPanel Width="230" Margin="-5,-5,-5,-5">
                                <!--  Header  -->
                                <TextBlock
                                    Width="230"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Text="Kaamera parameetrid" />

                                <!--  Camera Parameters  -->
                                <StackPanel Width="230" Margin="0,5,5,5">
                                    <!--  FOV Angle  -->
                                    <StackPanel Margin="0,0,0,0" Orientation="Horizontal">
                                        <TextBlock
                                            Width="127"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="Vaatenurk:" />
                                        <TextBox
                                            x:Name="FOVAngleTextBox"
                                            Width="80"
                                            Height="20"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource CustomTextBoxStyle}"
                                            Text="93" />

                                        <TextBlock
                                            Margin="5,0,0,0"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="°" />
                                    </StackPanel>

                                    <!--  Horizontal Resolution  -->
                                    <StackPanel Margin="0,5,0,0" Orientation="Horizontal">
                                        <TextBlock
                                            Width="127"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="Horisontaalne reso:" />
                                        <!--  Read-only TextBox to display the selected value  -->

                                        <ComboBox
                                            x:Name="ResolutionComboBox"
                                            Width="80"
                                            Height="20"
                                            Margin="0,0,0,0"
                                            Style="{StaticResource DarkThemeComboBox}"
                                            ToolTip="Select a camera resolution">
                                            <ComboBoxItem Content="7424" />
                                            <ComboBoxItem Content="3840" />
                                            <ComboBoxItem Content="3712" />
                                            <ComboBoxItem Content="2880" />
                                            <ComboBoxItem Content="2688" />
                                            <ComboBoxItem Content="2592" />
                                            <ComboBoxItem Content="2560" />
                                            <ComboBoxItem Content="2304" />
                                            <ComboBoxItem Content="1920" />
                                            <ComboBoxItem Content="1280" />
                                            <ComboBoxItem Content="800" />
                                            <ComboBoxItem Content="640" />
                                        </ComboBox>

                                        <TextBlock
                                            Margin="5,0,0,0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="px" />
                                    </StackPanel>

                                    <!--  Max Distance  -->
                                    <StackPanel Margin="0,5,0,0" Orientation="Horizontal">
                                        <TextBlock
                                            Width="127"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="Max kaugus:" />
                                        <TextBox
                                            x:Name="MaxDistanceTextBox"
                                            Width="80"
                                            Height="20"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource CustomTextBoxStyle}"
                                            Text="0" />
                                        <TextBlock
                                            Margin="5,0,0,0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Foreground="{DynamicResource ForegroundBrush}"
                                            Text="m" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </materialDesign:Card>

                        <materialDesign:Card
                            Margin="0,5,0,0"
                            Padding="10"
                            Background="Transparent"
                            BorderBrush="Gray"
                            BorderThickness="1">

                            <StackPanel Width="230" Margin="-5,-5,-5,-5">
                                <!--  Header  -->
                                <TextBlock
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Text="Pööra kaamerat" />

                                <!--  Rotation Angle Input  -->
                                <StackPanel Margin="0,5,0,5" Orientation="Horizontal">
                                    <TextBlock
                                        Width="127"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        Text="Pöörde nurk:" />
                                    <TextBox
                                        x:Name="RotationAngleTextBox"
                                        Width="80"
                                        Height="20"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource CustomTextBoxStyle}"
                                        Text="0"
                                        TextAlignment="Center"
                                        TextChanged="RotationAngleTextBox_TextChanged"
                                        ToolTip="Enter custom rotation angle in degrees." />
                                    <TextBlock
                                        Margin="5,0,0,0"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        Text="°" />
                                </StackPanel>

                                <!--  Predefined Rotation Options  -->
                                <TextBlock
                                    Margin="0,0,0,3"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Text="Keera nurka:" />
                                <Button
                                    x:Name="minusOneDegree"
                                    Width="20"
                                    Height="15"
                                    Margin="44,-22,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Background="{DynamicResource SecondaryBackgroundBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    Click="MinusOneDegree_Click"
                                    Content="-1°"
                                    FontSize="10"
                                    Foreground="{DynamicResource ForegroundBrush}">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            x:Name="ButtonBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="5">
                                                            <ContentPresenter
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Content="{TemplateBinding Content}"
                                                                TextBlock.FontSize="{TemplateBinding FontSize}" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <!--  Hover Effect  -->
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                            </Trigger>
                                                            <!--  Pressed Effect  -->
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="plusOneDegree"
                                    Width="20"
                                    Height="15"
                                    Margin="99,-22,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Background="{DynamicResource SecondaryBackgroundBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    Click="PlusOneDegree_Click"
                                    Content="+1°"
                                    FontSize="10"
                                    Foreground="{DynamicResource ForegroundBrush}">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            x:Name="ButtonBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="5">
                                                            <ContentPresenter
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Content="{TemplateBinding Content}"
                                                                TextBlock.FontSize="{TemplateBinding FontSize}" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <!--  Hover Effect  -->
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                            </Trigger>
                                                            <!--  Pressed Effect  -->
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="plusFourFiveDegree"
                                    Width="25"
                                    Height="15"
                                    Margin="159,-22,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Background="{DynamicResource SecondaryBackgroundBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    Click="PlusFourFiveDegree_Click"
                                    Content="+45°"
                                    FontSize="10"
                                    Foreground="{DynamicResource ForegroundBrush}">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            x:Name="ButtonBorder"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="5">
                                                            <ContentPresenter
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Content="{TemplateBinding Content}"
                                                                TextBlock.FontSize="{TemplateBinding FontSize}" />
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <!--  Hover Effect  -->
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                            </Trigger>
                                                            <!--  Pressed Effect  -->
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <StackPanel
                                    Width="230"
                                    HorizontalAlignment="Left"
                                    Orientation="Horizontal">
                                    <RadioButton
                                        x:Name="Angle0"
                                        Margin="0,0,5,0"
                                        Checked="RotationAngle_Checked"
                                        Content="0°"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        GroupName="RotationAngle"
                                        IsChecked="True" />
                                    <RadioButton
                                        x:Name="Angle90"
                                        Margin="0,0,5,0"
                                        Checked="RotationAngle_Checked"
                                        Content="90°"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        GroupName="RotationAngle" />
                                    <RadioButton
                                        x:Name="Angle180"
                                        Margin="0,0,5,0"
                                        Checked="RotationAngle_Checked"
                                        Content="180°"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        GroupName="RotationAngle" />
                                    <RadioButton
                                        x:Name="Angle270"
                                        Margin="0,0,5,0"
                                        Checked="RotationAngle_Checked"
                                        Content="270°"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        GroupName="RotationAngle" />


                                </StackPanel>
                            </StackPanel>
                        </materialDesign:Card>

                        <!--  Action Buttons  -->
                        <Grid Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!--  Undo Button  -->
                            <Button
                                x:Name="UndoButton"
                                Grid.Column="0"
                                Width="115"
                                Height="30"
                                Margin="0,0,5,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Background="{DynamicResource SecondaryBackgroundBrush}"
                                BorderBrush="{DynamicResource BorderBrush}"
                                Click="UndoButton_Click"
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="{DynamicResource ForegroundBrush}"
                                ToolTip="Undo last filled region">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon 
                                        Kind="Undo" 
                                        Width="18" 
                                        Height="18" 
                                        VerticalAlignment="Center"
                                        Margin="0,0,5,0"/>
                                    <TextBlock Text="Undo" VerticalAlignment="Center"/>
                                </StackPanel>
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="BorderThickness" Value="1" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        x:Name="ButtonBorder"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="5">
                                                        <ContentPresenter
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Content="{TemplateBinding Content}" />
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <!--  Hover Effect  -->
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                        </Trigger>
                                                        <!--  Pressed Effect  -->
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                            
                            <!--  Joonista Button  -->
                            <Button
                                x:Name="FilledRegionButton"
                                Grid.Column="1"
                                Width="115"
                                Height="30"
                                Margin="5,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Background="{DynamicResource SecondaryBackgroundBrush}"
                                BorderBrush="{DynamicResource BorderBrush}"
                                Click="FilledRegionButton_Click"
                                Content="Joonista"
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="{DynamicResource ForegroundBrush}">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="BorderThickness" Value="1" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        x:Name="ButtonBorder"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="5">
                                                        <ContentPresenter
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Content="{TemplateBinding Content}" />
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <!--  Hover Effect  -->
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource SecondaryBackgroundBrush}" />
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource IconHoverBrush}" />
                                                        </Trigger>
                                                        <!--  Pressed Effect  -->
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource IconHoverBrush}" />
                                                            <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <!--  DORI Checkboxes Group  -->
                        <materialDesign:Card
                            Margin="0,5,0,0"
                            Padding="10"
                            Background="Transparent"
                            BorderBrush="Gray"
                            BorderThickness="1">
                            <StackPanel Margin="-5,-5,-5,-5">
                                <!--  Header  -->
                                <TextBlock
                                    Width="230"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Text="DORI valikud" />

                                <!--  Checkboxes  -->
                                <CheckBox
                                    x:Name="CheckboxDetection"
                                    Height="25.5"
                                    Margin="3,0,0,0"
                                    Checked="DORIOption_Checked"
                                    Content="Detection (25px/m)"
                                    IsChecked="False"
                                    Style="{StaticResource CustomCheckboxStyle}" />
                                <CheckBox
                                    x:Name="CheckboxObservation"
                                    Height="25.5"
                                    Margin="3,0,0,0"
                                    Checked="DORIOption_Checked"
                                    Content="Observation (63px/m)"
                                    IsChecked="False"
                                    Style="{StaticResource CustomCheckboxStyle}" />
                                <CheckBox
                                    x:Name="CheckboxRecognition"
                                    Height="25.5"
                                    Margin="3,0,0,0"
                                    Checked="DORIOption_Checked"
                                    Content="Recognition (125px/m)"
                                    IsChecked="False"
                                    Style="{StaticResource CustomCheckboxStyle}" />
                                <CheckBox
                                    x:Name="CheckboxIdentification"
                                    Height="25.5"
                                    Margin="3,0,0,0"
                                    Checked="DORIOption_Checked"
                                    Content="Identification (250px/m)"
                                    IsChecked="False"
                                    Style="{StaticResource CustomCheckboxStyle}" />
                            </StackPanel>
                        </materialDesign:Card>

                        <materialDesign:Card
                            Margin="0,5,0,0"
                            Padding="10"
                            Background="Transparent"
                            BorderBrush="Gray"
                            BorderThickness="1">
                            <StackPanel Margin="0,-5,0,5">
                                <!--  Header  -->
                                <TextBlock
                                    Width="230"
                                    FontSize="14"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Text="Filled Region valikud" />

                                <!--  ComboBox for Filled Regions  -->
                                <StackPanel Margin="4,5,0,0" Orientation="Horizontal">
                                    <TextBlock
                                        Width="96"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource ForegroundBrush}"
                                        Text="Filled Regions:" />
                                    <ComboBox
                                        x:Name="FilledRegionComboBox"
                                        Width="139"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource DarkThemeComboBox}"
                                        ToolTip="Select a filled region type" />
                                </StackPanel>

                            </StackPanel>
                        </materialDesign:Card>

                        <!--  Settings Button  -->
                        <!--  Settings Button Container  -->
                        <Grid HorizontalAlignment="Stretch" Margin="0,5,0,10">
                            <Button
                                x:Name="SettingsButton"
                                Width="25"
                                Height="25"
                                Margin="0,0,20,0"
                                HorizontalAlignment="Right"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                Click="SettingsButton_Click"
                                ToolTip="Open Settings">
                                <materialDesign:PackIcon
                                    Width="20"
                                    Height="20"
                                    Foreground="{DynamicResource ForegroundBrush}"
                                    Kind="Cog" />
                            </Button>
                        </Grid>

                    </StackPanel>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>